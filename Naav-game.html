<!DOCTYPE html>
<html lang="pa">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡®®‡®æ‡®Ç‡®µ - ‡®ó‡©á‡®Æ</title>
  <style>
    :root{
      --bg:#f6f2e8; --card:#fff; --accent:#f7941d; --accentDark:#d97910;
      --green:#2e7d32; --red:#c62828; --ink:#1f1f1f; --muted:#6b6b6b;
    }
    body{margin:0;font-family:"Noto Sans Gurmukhi", Arial, sans-serif;background:var(--bg);color:var(--ink);text-align:center;}
    .wrap{max-width:980px;margin:0 auto;padding:10px 14px 24px;}
    .topbar{display:flex;gap:10px;flex-wrap:wrap;justify-content:space-between;align-items:center;padding:8px 2px;}
    .brand{display:flex;gap:10px;align-items:center;flex-wrap:wrap;}
    .titlePill{background:var(--card);padding:10px 14px;border-radius:14px;box-shadow:0 6px 18px rgba(0,0,0,.08);font-weight:900;font-size:18px;}
    .meta{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;align-items:center;}
    .pill{background:var(--card);padding:10px 14px;border-radius:14px;box-shadow:0 6px 18px rgba(0,0,0,.08);font-weight:800;font-size:16px;}
    .lives{color:var(--red)} .score{color:#333} .level{color:#1565c0} .timer{color:#5d4037}
    .controls{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;align-items:center;}
    .btnSmall{border:none;cursor:pointer;background:var(--card);padding:10px 12px;border-radius:14px;box-shadow:0 6px 18px rgba(0,0,0,.08);font-weight:800;}
    .btnSmall:active{transform:translateY(1px)}
    .panel{margin:10px auto 0;background:linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.35));
      border-radius:18px;padding:14px;box-shadow:0 10px 24px rgba(0,0,0,.08);}
    .questionBox{margin:14px auto 10px;border:3px dashed var(--accent);border-radius:16px;padding:28px 12px;background:var(--card);
      font-size:44px;color:var(--green);font-weight:900;min-height:84px;display:flex;align-items:center;justify-content:center;letter-spacing:.5px;}
    .subline{margin:-2px 0 12px;font-size:14px;color:var(--muted);font-weight:700;}
    .options{display:grid;grid-template-columns:1fr 1fr;gap:14px;padding:6px 4px 4px;}
    .opt{border:none;cursor:pointer;background:var(--accent);color:white;border-radius:16px;padding:14px 10px;font-size:18px;font-weight:900;
      box-shadow:0 7px var(--accentDark);user-select:none;}
    .opt:active{box-shadow:0 2px var(--accentDark);transform:translateY(4px)}
    .opt.full{grid-column:1 / -1}
    .toast{margin:10px auto 0;max-width:720px;background:var(--card);border-radius:14px;padding:10px 12px;box-shadow:0 6px 18px rgba(0,0,0,.08);
      font-weight:900;display:none;}
    .toast.ok{color:var(--green)} .toast.no{color:var(--red)}
    .footerHint{margin-top:10px;font-size:12px;color:var(--muted);font-weight:700;}
    @media (max-width:430px){.questionBox{font-size:38px}.opt{font-size:16px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="titlePill">‡®®‡®æ‡®Ç‡®µ</div>
        <div class="pill level">‡®≤‡©à‡®µ‡®≤: <strong id="level">1</strong> (<span id="qInLevel">1</span>/<span id="qPerLevel">10</span>)</div>
      </div>

      <div class="meta">
        <div class="pill score">‡®∏‡®ï‡©ã‡®∞: <strong id="score">0</strong></div>
        <div class="pill lives">‡®ú‡®æ‡®®‡®æ‡®Ç: <strong id="lives">3</strong></div>
        <div class="pill timer">‡®ü‡®æ‡®à‡®Æ: <strong id="time">20</strong>s</div>
      </div>

      <div class="controls">
        <button class="btnSmall" id="muteBtn">üîä Sound: ON</button>
        <button class="btnSmall" id="resetBtn">üîÅ Restart</button>
      </div>
    </div>

    <div class="panel">
      <div class="questionBox" id="word">‡®™‡®æ‡®£‡©Ä</div>
      <div class="subline">‡®∏‡®π‡©Ä ‡®ï‡®ø‡®∏‡®Æ ‡®ö‡©Å‡®£‡©ã ‚úÖ (‡®Ü‡®Æ/‡®ñ‡®æ‡®∏/‡®á‡®ï‡©±‡®†‡®µ‡®æ‡®ö‡®ï/‡®µ‡®∏‡®§‡©Ç‡®µ‡®æ‡®ö‡®ï/‡®≠‡®æ‡®µ‡®µ‡®æ‡®ö‡®ï)</div>

      <div class="options">
        <button class="opt" data-ans="aam">‡®Ü‡®Æ ‡®®‡®æ‡®Ç‡®µ</button>
        <button class="opt" data-ans="khaas">‡®ñ‡®æ‡®∏ ‡®®‡®æ‡®Ç‡®µ</button>
        <button class="opt" data-ans="ikath">‡®á‡®ï‡©±‡®†‡®µ‡®æ‡®ö‡®ï ‡®®‡®æ‡®Ç‡®µ</button>
        <button class="opt" data-ans="vastu">‡®µ‡®∏‡®§‡©Ç‡®µ‡®æ‡®ö‡®ï ‡®®‡®æ‡®Ç‡®µ</button>
        <button class="opt full" data-ans="bhaav">‡®≠‡®æ‡®µ‡®µ‡®æ‡®ö‡®ï ‡®®‡®æ‡®Ç‡®µ</button>
      </div>

      <div class="toast" id="toast"></div>
      <div class="footerHint">Note: Sound ‡®™‡®π‡®ø‡®≤‡©Ä ‡®µ‡®æ‡®∞ ‡®ö‡®≤‡®æ‡®â‡®£ ‡®≤‡®à ‡®ï‡©ã‡®à ‡®µ‡©Ä ‡®¨‡®ü‡®® ‡®ü‡©à‡®™ ‡®ï‡®∞‡©ã (mobile rule).</div>
    </div>
  </div>

<script>
/* ‚úÖ Exam-safe, NO ambiguity list */
const QUESTIONS = [
  // ‡®Ü‡®Æ ‡®®‡®æ‡®Ç‡®µ (clear)
  {w:"‡®≤‡©ú‡®ï‡®æ", t:"aam"}, {w:"‡®≤‡©ú‡®ï‡©Ä", t:"aam"}, {w:"‡®Ö‡®ß‡®ø‡®Ü‡®™‡®ï", t:"aam"}, {w:"‡®ï‡®ø‡®∏‡®æ‡®®", t:"aam"},
  {w:"‡®°‡®æ‡®ï‡®ü‡®∞", t:"aam"}, {w:"‡®µ‡®ø‡®¶‡®ø‡®Ü‡®∞‡®•‡©Ä", t:"aam"}, {w:"‡®ï‡©Å‡©±‡®§‡®æ", t:"aam"}, {w:"‡®¨‡®ø‡©±‡®≤‡©Ä", t:"aam"},
  {w:"‡®ï‡®ø‡®§‡®æ‡®¨", t:"aam"}, {w:"‡®ï‡®≤‡®Æ", t:"aam"}, {w:"‡®Æ‡©á‡®ú‡®º", t:"aam"}, {w:"‡®ï‡©Å‡®∞‡®∏‡©Ä", t:"aam"},
  {w:"‡®ò‡®∞", t:"aam"}, {w:"‡®∏‡®ï‡©Ç‡®≤", t:"aam"}, {w:"‡®¶‡®∞‡®ñ‡®º‡®§", t:"aam"}, {w:"‡®´‡©Å‡©±‡®≤", t:"aam"},
  {w:"‡®™‡©∞‡®õ‡©Ä", t:"aam"}, {w:"‡®∏‡©ú‡®ï", t:"aam"}, {w:"‡®¶‡®∞‡®µ‡®æ‡®ú‡®º‡®æ", t:"aam"}, {w:"‡®ñ‡®ø‡©ú‡®ï‡©Ä", t:"aam"},

  // ‡®ñ‡®æ‡®∏ ‡®®‡®æ‡®Ç‡®µ (only proper places/names, very clear)
  {w:"‡®≠‡®æ‡®∞‡®§", t:"khaas"}, {w:"‡®™‡©∞‡®ú‡®æ‡®¨", t:"khaas"}, {w:"‡®π‡®∞‡®ø‡®Ü‡®£‡®æ", t:"khaas"}, {w:"‡®¶‡®ø‡©±‡®≤‡©Ä", t:"khaas"},
  {w:"‡®ö‡©∞‡®°‡©Ä‡®ó‡©ú‡©ç‡®π", t:"khaas"}, {w:"‡®Ö‡©∞‡®Æ‡©ç‡®∞‡®ø‡®§‡®∏‡®∞", t:"khaas"}, {w:"‡®≤‡©Å‡®ß‡®ø‡®Ü‡®£‡®æ", t:"khaas"}, {w:"‡®ú‡®≤‡©∞‡®ß‡®∞", t:"khaas"},
  {w:"‡®∏‡®§‡®≤‡©Å‡®ú", t:"khaas"}, {w:"‡®ó‡©∞‡®ó‡®æ", t:"khaas"}, {w:"‡®π‡®ø‡®Æ‡®æ‡®≤‡®ø‡®Ü", t:"khaas"}, {w:"‡®è‡®∂‡©Ä‡®Ü", t:"khaas"},
  {w:"‡®Ö‡®´‡®∞‡©Ä‡®ï‡®æ", t:"khaas"}, {w:"‡®Ö‡®∏‡®ü‡®∞‡©á‡®≤‡©Ä‡®Ü", t:"khaas"}, {w:"‡®∏‡®ø‡®°‡®®‡©Ä", t:"khaas"}, {w:"‡®ï‡©à‡®®‡®¨‡®∞‡®æ", t:"khaas"},

  // ‡®á‡®ï‡©±‡®†‡®µ‡®æ‡®ö‡®ï ‡®®‡®æ‡®Ç‡®µ (clear group words)
  {w:"‡®≠‡©Ä‡©ú", t:"ikath"}, {w:"‡®ù‡©Å‡©∞‡®°", t:"ikath"}, {w:"‡®ü‡©ã‡®≤‡©Ä", t:"ikath"}, {w:"‡®ú‡®•‡®æ", t:"ikath"},
  {w:"‡®∏‡©∞‡®ó‡®§", t:"ikath"}, {w:"‡®™‡®∞‡®ø‡®µ‡®æ‡®∞", t:"ikath"}, {w:"‡®ï‡®Æ‡©á‡®ü‡©Ä", t:"ikath"}, {w:"‡®ú‡®Æ‡®æ‡®§", t:"ikath"},
  {w:"‡®Æ‡©∞‡®°‡®≤‡©Ä", t:"ikath"}, {w:"‡®¶‡®≤", t:"ikath"}, {w:"‡®∏‡®Æ‡©Ç‡®π", t:"ikath"}, {w:"‡®´‡©å‡®ú", t:"ikath"},

  // ‡®µ‡®∏‡®§‡©Ç‡®µ‡®æ‡®ö‡®ï ‡®®‡®æ‡®Ç‡®µ (clear materials)
  {w:"‡®™‡®æ‡®£‡©Ä", t:"vastu"}, {w:"‡®¶‡©Å‡©±‡®ß", t:"vastu"}, {w:"‡®ò‡©Ä", t:"vastu"}, {w:"‡®§‡©á‡®≤", t:"vastu"},
  {w:"‡®∂‡®π‡®ø‡®¶", t:"vastu"}, {w:"‡®≤‡©ã‡®π‡®æ", t:"vastu"}, {w:"‡®∏‡©ã‡®®‡®æ", t:"vastu"}, {w:"‡®ö‡®æ‡®Ç‡®¶‡©Ä", t:"vastu"},
  {w:"‡®®‡®Æ‡®ï", t:"vastu"}, {w:"‡®ö‡©Ä‡®®‡©Ä", t:"vastu"}, {w:"‡®Æ‡®ø‡©±‡®ü‡©Ä", t:"vastu"}, {w:"‡®π‡®µ‡®æ", t:"vastu"},
  {w:"‡®∞‡©á‡®§", t:"vastu"}, {w:"‡®ï‡©±‡®ö", t:"vastu"}, {w:"‡®ï‡©ã‡®≤‡®æ", t:"vastu"}, {w:"‡®∞‡©Ç‡®à", t:"vastu"},

  // ‡®≠‡®æ‡®µ‡®µ‡®æ‡®ö‡®ï ‡®®‡®æ‡®Ç‡®µ (clear feelings/qualities)
  {w:"‡®ñ‡©Å‡®∂‡©Ä", t:"bhaav"}, {w:"‡®¶‡©Å‡©±‡®ñ", t:"bhaav"}, {w:"‡®°‡®∞", t:"bhaav"}, {w:"‡®™‡®ø‡®Ü‡®∞", t:"bhaav"},
  {w:"‡®ó‡©Å‡©±‡®∏‡®æ", t:"bhaav"}, {w:"‡®∂‡®∞‡®Æ", t:"bhaav"}, {w:"‡®á‡©±‡®ú‡®º‡®§", t:"bhaav"}, {w:"‡®Ü‡®∏", t:"bhaav"},
  {w:"‡®â‡®Æ‡©Ä‡®¶", t:"bhaav"}, {w:"‡®∏‡®¨‡®∞", t:"bhaav"}, {w:"‡®π‡®ø‡©∞‡®Æ‡®§", t:"bhaav"}, {w:"‡®®‡©á‡®ï‡©Ä", t:"bhaav"},
  {w:"‡®∏‡©±‡®ö‡®æ‡®à", t:"bhaav"}, {w:"‡®¶‡©ã‡®∏‡®§‡©Ä", t:"bhaav"}, {w:"‡®Æ‡®ø‡®π‡®®‡®§", t:"bhaav"}, {w:"‡®∏‡®ø‡®Ü‡®£‡®™", t:"bhaav"},
];

const Q_PER_LEVEL = 10;
const BASE_TIME = 20;
const MIN_TIME = 8;
const TIME_DECREASE_PER_LEVEL = 1;

let pool = [];
let idx = 0;
let score = 0;
let lives = 3;
let level = 1;
let inLevel = 1;
let timeLeft = BASE_TIME;
let timerId = null;

let soundOn = true;
let audioUnlocked = false;
let audioCtx = null;

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]] = [arr[j],arr[i]];
  }
  return arr;
}
function $(id){ return document.getElementById(id); }

function showToast(msg, ok=true){
  const t = $("toast");
  t.textContent = msg;
  t.className = "toast " + (ok ? "ok":"no");
  t.style.display = "block";
  clearTimeout(showToast._tid);
  showToast._tid = setTimeout(()=>{ t.style.display="none"; }, 900);
}

function ensureAudio(){
  if(!audioCtx){
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  }
  if(audioCtx.state === "suspended") audioCtx.resume();
  audioUnlocked = true;
}
function beep({freq=440, dur=0.09, type="sine", vol=0.15}={}){
  if(!soundOn) return;
  ensureAudio();
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.type = type; o.frequency.value = freq;
  g.gain.value = vol;
  o.connect(g); g.connect(audioCtx.destination);
  o.start();
  o.stop(audioCtx.currentTime + dur);
}
function sfxCorrect(){
  beep({freq:523, dur:0.08, type:"triangle", vol:0.14});
  setTimeout(()=>beep({freq:659, dur:0.08, type:"triangle", vol:0.14}), 90);
  setTimeout(()=>beep({freq:784, dur:0.10, type:"triangle", vol:0.14}), 180);
}
function sfxWrong(){
  beep({freq:220, dur:0.12, type:"sawtooth", vol:0.10});
  setTimeout(()=>beep({freq:180, dur:0.14, type:"sawtooth", vol:0.10}), 120);
}
function sfxLevelUp(){
  beep({freq:523, dur:0.10, type:"square", vol:0.10});
  setTimeout(()=>beep({freq:659, dur:0.10, type:"square", vol:0.10}), 120);
  setTimeout(()=>beep({freq:784, dur:0.12, type:"square", vol:0.10}), 240);
  setTimeout(()=>beep({freq:988, dur:0.14, type:"square", vol:0.10}), 380);
}

function currentLimitTime(){
  const t = BASE_TIME - (level-1)*TIME_DECREASE_PER_LEVEL;
  return Math.max(MIN_TIME, t);
}
function resetPool(){
  pool = shuffle([...QUESTIONS]);
  idx = 0;
}
function updateHUD(){
  $("score").textContent = score;
  $("lives").textContent = lives;
  $("level").textContent = level;
  $("qPerLevel").textContent = Q_PER_LEVEL;
  $("qInLevel").textContent = inLevel;
  $("time").textContent = timeLeft;
}
function startTimer(){
  clearInterval(timerId);
  timerId = setInterval(()=>{
    timeLeft--;
    $("time").textContent = timeLeft;
    if(timeLeft <= 0){
      clearInterval(timerId);
      handleWrong(true);
    }
  }, 1000);
}
function lockButtons(lock){
  document.querySelectorAll(".opt").forEach(b=>{
    b.disabled = lock;
    b.style.opacity = lock ? 0.75 : 1;
  });
}
function loadQuestion(){
  if(idx >= pool.length) resetPool();
  const q = pool[idx];
  $("word").textContent = q.w;
  timeLeft = currentLimitTime();
  updateHUD();
  startTimer();
}
function nextStep(){
  idx++;
  inLevel++;
  if(inLevel > Q_PER_LEVEL){
    level++;
    inLevel = 1;
    showToast("üéâ ‡®≤‡©à‡®µ‡®≤ " + level + " ‡®∂‡©Å‡®∞‡©Ç!", true);
    sfxLevelUp();
  }
  loadQuestion();
}
function handleCorrect(){
  score++;
  updateHUD();
  showToast("‡®∏‡®π‡©Ä ‚úÖ", true);
  sfxCorrect();
  lockButtons(true);
  setTimeout(()=>{ lockButtons(false); nextStep(); }, 350);
}
function handleWrong(fromTimeout=false){
  lives--;
  updateHUD();
  showToast(fromTimeout ? "‡®ü‡®æ‡®à‡®Æ ‡©ô‡®§‡®Æ ‚è±Ô∏è (‡®ó‡®≤‡®§) ‚ùå" : "‡®ó‡®≤‡®§ ‚ùå", false);
  sfxWrong();

  if(lives <= 0){
    clearInterval(timerId);
    lockButtons(true);
    setTimeout(()=>{
      alert("‡®ñ‡©á‡®° ‡®ñ‡®§‡®Æ ‡®π‡©ã ‡®ó‡®à!\n\n‡®∏‡®ï‡©ã‡®∞: " + score + "\n‡®≤‡©à‡®µ‡®≤: " + level);
      restartGame();
    }, 120);
    return;
  }
  lockButtons(true);
  setTimeout(()=>{ lockButtons(false); nextStep(); }, 450);
}
function restartGame(){
  clearInterval(timerId);
  score = 0; lives = 3; level = 1; inLevel = 1;
  resetPool();
  loadQuestion();
  lockButtons(false);
}

document.querySelectorAll(".opt").forEach(btn=>{
  btn.addEventListener("click", (e)=>{
    if(!audioUnlocked) { try{ ensureAudio(); }catch{} }
    const ans = e.currentTarget.dataset.ans;
    const q = pool[idx];
    if(ans === q.t) handleCorrect();
    else handleWrong(false);
  });
});
$("muteBtn").addEventListener("click", ()=>{
  if(!audioUnlocked) { try{ ensureAudio(); }catch{} }
  soundOn = !soundOn;
  $("muteBtn").textContent = soundOn ? "üîä Sound: ON" : "üîá Sound: OFF";
});
$("resetBtn").addEventListener("click", ()=>{
  if(!audioUnlocked) { try{ ensureAudio(); }catch{} }
  restartGame();
});

restartGame();
</script>
</body>
</html>