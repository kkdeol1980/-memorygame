<!DOCTYPE html>
<html lang="pa">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>‡®¨‡®π‡©Å‡®§‡©á ‡®∂‡®¨‡®¶‡®æ‡®Ç ‡®¶‡©Ä ‡®•‡®æ‡®Ç ‡®á‡©±‡®ï ‡®∂‡®¨‡®¶ ‚Ä¢ Water Drops</title>
<style>
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    font-family:"Noto Sans Gurmukhi",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    overflow:hidden;color:#fff;
    background:
      radial-gradient(900px 650px at 12% 14%, rgba(0,255,255,.20), transparent 62%),
      radial-gradient(1000px 700px at 88% 18%, rgba(255,0,200,.16), transparent 62%),
      radial-gradient(1100px 800px at 30% 92%, rgba(0,255,150,.14), transparent 66%),
      radial-gradient(950px 650px at 70% 70%, rgba(255,180,0,.10), transparent 70%),
      linear-gradient(180deg,#030718 0%, #071a44 35%, #0a2c62 70%, #040a1f 100%);
  }

  .star{
    position:fixed;width:2px;height:2px;border-radius:50%;
    background:rgba(255,255,255,.95);
    box-shadow:0 0 6px rgba(255,255,255,.35);
    pointer-events:none;z-index:1;opacity:.8;
    animation: tw 4.6s ease-in-out infinite;
  }
  @keyframes tw{0%,100%{opacity:.2;transform:scale(.9)}50%{opacity:1;transform:scale(1.35)}}

  .wrap{
    position:relative;z-index:5;
    height:100svh;
    padding:12px;
    display:flex;flex-direction:column;gap:10px;
  }

  header{
    display:flex;align-items:center;justify-content:space-between;gap:10px;
    background:rgba(255,255,255,.10);
    border:1px solid rgba(255,255,255,.18);
    border-radius:18px;
    padding:10px;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow:0 18px 40px rgba(0,0,0,.35);
  }
  .brand .t{font-weight:1000;font-size:14px}
  .brand .s{font-size:12px;opacity:.85;margin-top:2px}

  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
  .pill{
    border-radius:999px;padding:8px 12px;
    background:rgba(255,255,255,.12);
    border:1px solid rgba(255,255,255,.20);
    box-shadow:0 12px 22px rgba(0,0,0,.25);
    font-weight:1000;font-size:12px;user-select:none;white-space:nowrap;
  }
  .btn{
    border:none;cursor:pointer;
    padding:9px 12px;border-radius:14px;
    font-weight:1000;font-size:12px;
    color:#06163a;
    background:linear-gradient(135deg,#ffffff,#c8f5ff,#ffd2ff);
    box-shadow:0 16px 26px rgba(0,0,0,.25);
    -webkit-tap-highlight-color:transparent;
  }
  .btn:active{transform:translateY(1px)}

  .panel{
    flex:1 1 auto;min-height:0;
    border-radius:22px;
    background:rgba(255,255,255,.10);
    border:1px solid rgba(255,255,255,.18);
    box-shadow:0 22px 55px rgba(0,0,0,.35);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    overflow:hidden;
    display:flex;flex-direction:column;
  }

  .questionBox{
    padding:14px;
    border-bottom:1px solid rgba(255,255,255,.12);
    background:rgba(0,0,0,.10);
  }
  .qTop{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
  .qNo{
    font-weight:1000;font-size:12px;padding:6px 10px;border-radius:999px;
    background:rgba(255,255,255,.12);
    border:1px solid rgba(255,255,255,.16);
  }
  .qText{margin-top:10px;font-size:18px;font-weight:1000;line-height:1.35}
  .hint{margin-top:8px;font-size:12px;opacity:.82}

  .arena{
    position:relative;
    flex:1 1 auto;
    min-height:260px;
    overflow:hidden;
  }

  .footerBar{
    display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;
    padding:10px 12px;
    border-top:1px solid rgba(255,255,255,.12);
    background:rgba(0,0,0,.10);
  }
  .msg{
    font-weight:1000;padding:8px 12px;border-radius:999px;
    background:rgba(255,255,255,.12);
    border:1px solid rgba(255,255,255,.16);
  }

  .drop{
    position:absolute;
    width:90px;height:90px;
    display:flex;align-items:center;justify-content:center;
    text-align:center;padding:10px;
    border-radius:999px;
    color:#041126;font-weight:1000;font-size:13px;
    cursor:pointer;user-select:none;
    -webkit-tap-highlight-color:transparent;
    box-shadow: inset 0 0 0 3px rgba(255,255,255,.62), 0 14px 28px rgba(0,0,0,.35);
    background:
      radial-gradient(circle at 30% 25%, rgba(255,255,255,.96), rgba(255,255,255,.42) 35%, rgba(140,220,255,.28) 70%, rgba(100,190,255,.14) 100%),
      linear-gradient(135deg, rgba(120,220,255,.92), rgba(120,150,255,.48));
    transition:transform .08s, filter .12s;
  }
  .drop:active{transform:scale(.985)}
  .drop.ok{filter:saturate(1.2) brightness(1.05)}
  .drop.bad{filter:saturate(1.2) brightness(.98)}
  .drop.locked{pointer-events:none;opacity:.92}

  .overlay{
    position:fixed;inset:0;
    background:rgba(0,0,0,.55);
    display:none;align-items:center;justify-content:center;
    padding:14px;z-index:99;
  }
  .sheet{
    width:min(540px, 100%);
    background:rgba(255,255,255,.94);
    border:1px solid rgba(0,0,0,.10);
    border-radius:18px;
    box-shadow:0 25px 60px rgba(0,0,0,.35);
    padding:14px;color:#111;
  }
  .sheet h3{margin:0 0 10px;font-size:16px;font-weight:1000}
  .lvlGrid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:10px}
  .lvlBtn{
    border:none;cursor:pointer;
    padding:12px 10px;border-radius:16px;
    font-weight:1000;background:#fff;
    border:2px solid rgba(0,0,0,.10);
    box-shadow:0 10px 18px rgba(0,0,0,.10);
  }
  .lvlBtn.active{outline:4px solid rgba(4,10,31,.85)}
</style>
</head>

<body>
<script>
/* stars */
(function(){
  const count=200;
  for(let i=0;i<count;i++){
    const s=document.createElement("div");
    s.className="star";
    const size=(Math.random()<0.85)?1:2;
    s.style.width=size+"px"; s.style.height=size+"px";
    s.style.left=(Math.random()*100)+"vw";
    s.style.top=(Math.random()*100)+"vh";
    const tint=Math.random();
    if(tint<0.10) s.style.background="rgba(200,220,255,.95)";
    else if(tint<0.18) s.style.background="rgba(255,220,200,.95)";
    else if(tint<0.24) s.style.background="rgba(200,255,220,.95)";
    else s.style.background="rgba(255,255,255,.95)";
    s.style.opacity=(0.18+Math.random()*0.82).toFixed(2);
    s.style.animationDuration=(3.0+Math.random()*6.0).toFixed(2)+"s";
    document.body.appendChild(s);
  }
})();
</script>

<div class="wrap">
  <header>
    <div class="brand">
      <div class="t">‡®¨‡®π‡©Å‡®§‡©á ‡®∂‡®¨‡®¶‡®æ‡®Ç ‡®¶‡©Ä ‡®•‡®æ‡®Ç ‡®á‡©±‡®ï ‡®∂‡®¨‡®¶</div>
      <div class="s" id="levelLine">Level 1</div>
    </div>
    <div class="row">
      <div class="pill" id="scorePill">Score: 0</div>
      <div class="pill" id="progPill">0/0</div>
      <button class="btn" id="levelsBtn">Levels</button>
      <button class="btn" id="restartBtn">Restart Level</button>
    </div>
  </header>

  <div class="panel">
    <div class="questionBox">
      <div class="qTop">
        <div class="qNo" id="qNo">Q1</div>
        <div class="pill" id="levelPill">Level 1</div>
      </div>
      <div class="qText" id="qText">‚Ä¶</div>
      <div class="hint">‡®∏‡®π‡©Ä water-drop tap ‡®ï‡®∞‡©ã ‚úÖ (‡®ó‡®≤‡®§ ‚Äò‡®§‡©á ‡®µ‡©Ä sound)</div>
    </div>

    <div class="arena" id="arena"></div>

    <div class="footerBar">
      <div class="msg" id="msg">Ready ‚úÖ</div>
      <div class="row">
        <button class="btn" id="prevBtn">Prev</button>
        <button class="btn" id="nextBtn">Next</button>
      </div>
    </div>
  </div>
</div>

<div class="overlay" id="overlay">
  <div class="sheet">
    <h3>Levels ‡®ö‡©Å‡®£‡©ã</h3>
    <div class="lvlGrid" id="lvlGrid"></div>
    <div style="display:flex;justify-content:flex-end;margin-top:10px;">
      <button class="btn" id="closeOverlay">Close</button>
    </div>
  </div>
</div>

<script>
/* ====== sound ====== */
let audioCtx=null;
function ensureAudio(){
  if(!audioCtx){
    const AC=window.AudioContext||window.webkitAudioContext;
    audioCtx=new AC();
  }
  if(audioCtx.state==="suspended") audioCtx.resume().catch(()=>{});
}
function tone(freq, dur=0.14, vol=0.09, type="sine"){
  ensureAudio();
  const t0=audioCtx.currentTime;
  const o=audioCtx.createOscillator();
  const g=audioCtx.createGain();
  o.type=type; o.frequency.setValueAtTime(freq,t0);
  g.gain.setValueAtTime(0.0001,t0);
  g.gain.exponentialRampToValueAtTime(vol,t0+0.01);
  g.gain.exponentialRampToValueAtTime(0.0001,t0+dur);
  o.connect(g); g.connect(audioCtx.destination);
  o.start(t0); o.stop(t0+dur);
}
function correctSound(){ tone(900,0.10,0.10); setTimeout(()=>tone(1200,0.12,0.09,"triangle"),70); }
function wrongSound(){ tone(280,0.14,0.10,"sawtooth"); setTimeout(()=>tone(200,0.18,0.08,"triangle"),80); }
addEventListener("pointerdown", ensureAudio, {once:true});

/* ====== questions (with your correction: a:"‡®µ‡®æ‡®∞") ====== */
const ALL = [
  {q:"‡®â‡®π ‡®™‡®æ‡®† ‡®ú‡©ã ‡®∏‡®º‡©Å‡®∞‡©Ç ‡®§‡©ã‡®Ç ‡®≤‡©à ‡®ï‡©á ‡®Ö‡©∞‡®§ ‡®§‡©±‡®ï ‡®Ö‡®∞‡©Å‡®ï ‡®ï‡©Ä‡®§‡®æ ‡®ú‡®æ‡®µ‡©á", a:"‡®Ö‡®ñ‡©∞‡®°-‡®™‡®æ‡®†"},
  {q:"‡®â‡®π ‡®•‡®æ‡®Ç ‡®ú‡®ø‡©±‡®•‡©á ‡®™‡®π‡®ø‡®≤‡®µ‡®æ‡®® ‡®ò‡©ã‡®≤ ‡®ï‡®∞‡®¶‡©á ‡®π‡®®", a:"‡®Ö‡®ñ‡®æ‡©ú‡®æ"},
  {q:"‡®â‡®π ‡®•‡®æ‡®Ç ‡®ú‡©ã ‡®∏‡®≠ ‡®¶‡©Ä ‡®∏‡®æ‡®Ç‡®ù‡©Ä ‡®π‡©ã‡®µ‡©á", a:"‡®∏‡®º‡®æ‡®Æ‡®≤‡®æ‡®ü"},
  {q:"‡®â‡®π ‡®™‡©Å‡®∏‡®§‡®ï ‡®ú‡®ø‡®∏ ‡®µ‡®ø‡©±‡®ö ‡®≤‡®ø‡®ñ‡®æ‡®∞‡©Ä ‡®µ‡©±‡®≤‡©ã‡®Ç ‡®Ü‡®™‡®£‡©Ä ‡®ú‡©Ä‡®µ‡®®‡©Ä ‡®≤‡®ø‡®ñ‡©Ä ‡®π‡©ã‡®µ‡©á", a:"‡®∏‡©ç‡®µ‡©à‡®ú‡©Ä‡®µ‡®®‡©Ä"},
  {q:"‡®â‡®π ‡®™‡©Å‡®∏‡®§‡®ï ‡®ú‡®ø‡®∏ ‡®µ‡®ø‡©±‡®ö ‡®≤‡®ø‡®ñ‡®æ‡®∞‡©Ä ‡®®‡©á ‡®ï‡®ø‡®∏‡©á ‡®π‡©ã‡®∞ ‡®µ‡®ø‡®Ö‡®ï‡®§‡©Ä ‡®¶‡©Ä ‡®ú‡©Ä‡®µ‡®®‡©Ä ‡®≤‡®ø‡®ñ‡©Ä ‡®π‡©ã‡®µ‡©á", a:"‡®ú‡©Ä‡®µ‡®®‡©Ä"},
  {q:"‡®â‡®π ‡®Ö‡®ñ‡®º‡®¨‡®æ‡®∞ ‡®ú‡©ã ‡®π‡®´‡®º‡®§‡©á ‡®¨‡®æ‡®Ö‡®¶ ‡®®‡®ø‡®ï‡®≤‡©á", a:"‡®∏‡®™‡®§‡®æ‡®π‡®ø‡®ï"},
  {q:"‡®â‡®π ‡®Æ‡©Å‡©∞‡®°‡®æ/‡®ï‡©Å‡©ú‡©Ä ‡®ú‡®ø‡®∏ ‡®¶‡®æ ‡®µ‡®ø‡®Ü‡®π ‡®®‡®æ ‡®π‡©ã‡®á‡®Ü ‡®π‡©ã‡®µ‡©á", a:"‡®ï‡©Å‡®Ü‡®∞‡®æ/‡®ï‡©Å‡®Ü‡®∞‡©Ä"},
  {q:"‡®â‡®π ‡®µ‡®ø‡®Ö‡®ï‡®§‡©Ä ‡®ú‡©ã ‡®π‡©±‡®• ‡®®‡®æ‡®≤‡®º ‡®Æ‡©Ç‡®∞‡®§‡®æ‡®Ç ‡®¨‡®£‡®æ‡®µ‡©á", a:"‡®ö‡®ø‡©±‡®§‡®∞‡®ï‡®æ‡®∞"},
  {q:"‡®â‡®π ‡®•‡®æ‡®Ç ‡®ú‡®ø‡©±‡®•‡©ã‡®Ç ‡®ö‡®æ‡®∞‡©á ‡®™‡®æ‡®∏‡®ø‡®Ü‡®Ç ‡®µ‡©±‡®≤ ‡®∞‡®∏‡®§‡©á ‡®®‡®ø‡®ï‡®≤‡®º‡®¶‡©á ‡®π‡©ã‡®£", a:"‡®ö‡©Å‡®∞‡®∏‡®§‡®æ"},
  {q:"‡®â‡®π ‡®•‡®æ‡®Ç ‡®ú‡®ø‡©±‡®•‡©á ‡®ò‡©ã‡©ú‡©á ‡®¨‡©±‡®ù‡®¶‡©á ‡®π‡©ã‡®£", a:"‡®§‡®¨‡©á‡®≤‡®æ"},

  {q:"‡®â‡®π ‡®ß‡®∞‡®§‡©Ä ‡®ú‡®ø‡®∏ ‡®µ‡®ø‡©±‡®ö ‡®ï‡©ã‡®à ‡®´‡®º‡®∏‡®≤ ‡®®‡®æ ‡®â‡®ó‡®æ‡®à ‡®ú‡®æ ‡®∏‡®ï‡®¶‡©Ä ‡®π‡©ã‡®µ‡©á", a:"‡®¨‡©∞‡®ú‡®∞"},
  {q:"‡®â‡®π ‡®ß‡®∞‡®§‡©Ä ‡®ú‡®ø‡©±‡®•‡©á ‡®¶‡©Ç‡®∞ ‡®§‡©±‡®ï ‡®∞‡©á‡®§ ‡®π‡©Ä ‡®∞‡©á‡®§ ‡®π‡©ã‡®µ‡©á", a:"‡®Æ‡®æ‡®∞‡©Ç‡®•‡®≤"},
  {q:"‡®â‡©±‡®ö‡©á ‡®§‡©á ‡®∏‡©Å‡©±‡®ö‡©á ‡®Ü‡®ö‡®æ‡®∞ ‡®µ‡®æ‡®≤‡®º‡®æ", a:"‡®∏‡®¶‡®æ‡®ö‡®æ‡®∞‡©Ä"},
  {q:"‡®Ü‡®ó‡®ø‡®Ü ‡®¶‡®æ ‡®™‡®æ‡®≤‡®£ ‡®ï‡®∞‡®® ‡®µ‡®æ‡®≤‡®º‡®æ", a:"‡®Ü‡®ó‡®ø‡®Ü‡®ï‡®æ‡®∞‡©Ä"},
  {q:"‡®Ü‡®™‡®£‡®æ ‡®â‡©±‡®≤‡©Ç ‡®∏‡®ø‡©±‡®ß‡®æ ‡®ï‡®∞‡®® ‡®µ‡®æ‡®≤‡®º‡®æ", a:"‡®∏‡©ç‡®µ‡®æ‡®∞‡®•‡©Ä"},
  {q:"‡®Ü‡®™‡®£‡©Ä ‡®Æ‡®∞‡®ú‡®º‡©Ä ‡®ï‡®∞‡®® ‡®µ‡®æ‡®≤‡®æ", a:"‡®Ü‡®™‡®π‡©Å‡®¶‡®∞‡®æ"},
  {q:"‡®∏‡®æ‡®π‡®ø‡®§ ‡®¶‡©Ä ‡®∞‡®ö‡®®‡®æ ‡®ï‡®∞‡®® ‡®µ‡®æ‡®≤‡®º‡®æ", a:"‡®∏‡®æ‡®π‡®ø‡®§‡®ï‡®æ‡®∞"},
  {q:"‡®∏‡©ã‡®®‡©á-‡®ö‡®æ‡®Ç‡®¶‡©Ä ‡®¶‡©á ‡®ó‡®π‡®ø‡®£‡®ø‡®Ü‡®Ç ‡®¶‡®æ ‡®µ‡®™‡®æ‡®∞ ‡®ï‡®∞‡®® ‡®µ‡®æ‡®≤‡®º‡®æ", a:"‡®∏‡®∞‡®æ‡®´‡®º"},
  {q:"‡®ï‡©∞‡®Æ ‡®§‡©ã‡®Ç ‡®ú‡©Ä‡®Ö ‡®ö‡©Å‡®∞‡®æ‡®â‡®£ ‡®µ‡®æ‡®≤‡®æ", a:"‡®ï‡©∞‡®Æ-‡®ö‡©ã‡®∞"},
  {q:"‡®ï‡®π‡®æ‡®£‡©Ä‡®Ü‡®Ç ‡®≤‡®ø‡®ñ‡®£ ‡®µ‡®æ‡®≤‡®æ/‡®µ‡®æ‡®≤‡®º‡©Ä", a:"‡®ï‡®π‡®æ‡®£‡©Ä‡®ï‡®æ‡®∞"},

  {q:"‡®ï‡®µ‡®ø‡®§‡®æ ‡®≤‡®ø‡®ñ‡®£ ‡®µ‡®æ‡®≤‡®æ/‡®µ‡®æ‡®≤‡©Ä", a:"‡®ï‡®µ‡©Ä/‡®ï‡®µ‡®ø‡®§‡®∞‡©Ä"},
  {q:"‡®ö‡®∞‡®ñ‡®æ ‡®ï‡©±‡®§‡®£ ‡®µ‡®æ‡®≤‡©Ä‡®Ü‡®Ç ‡®ï‡©Å‡©ú‡©Ä‡®Ü‡®Ç ‡®¶‡®æ ‡®á‡®ï‡©±‡®†", a:"‡®§‡©ç‡®∞‡®ø‡©∞‡®û‡®£"},
  {q:"‡®ö‡®æ‡®∞ ‡®™‡©à‡®∞‡®æ‡®Ç ‡®µ‡®æ‡®≤‡®º‡®æ ‡®ú‡®æ‡®®‡®µ‡®∞", a:"‡®ö‡©Å‡®™‡®æ‡®á‡®Ü"},
  {q:"‡®ú‡®ø‡®π‡©ú‡®æ ‡®™‡®∞‡®Æ‡®æ‡®§‡®Æ‡®æ ‡®®‡©Ç‡©∞ ‡®Æ‡©∞‡®®‡©á", a:"‡®Ü‡®∏‡®§‡®ï"},
  {q:"‡®ú‡®ø‡®π‡©ú‡®æ ‡®™‡®∞‡®Æ‡®æ‡®§‡®Æ‡®æ ‡®®‡©Ç‡©∞ ‡®®‡®æ ‡®Æ‡©∞‡®®‡©á", a:"‡®®‡®æ‡®∏‡®§‡®ï"},
  {q:"‡®ú‡®ø‡®π‡©ú‡®æ ‡®ï‡®ø‡®∏‡©á ‡®¶‡©Ä ‡®ï‡©Ä‡®§‡©Ä ‡®®‡©á‡®ï‡©Ä ‡®®‡®æ ‡®ú‡®æ‡®£‡©á", a:"‡®®‡®æ‡®∏‡®º‡©Å‡®ï‡®∞‡®æ / ‡®Ö‡®ï‡©ç‡®∞‡®ø‡®§‡®ò‡®£"},
  {q:"‡®ú‡®ø‡®π‡©ú‡®æ ‡®ï‡®¶‡©á ‡®®‡®æ ‡®•‡©±‡®ï‡©á", a:"‡®Ö‡®£‡®•‡©±‡®ï"},
  {q:"‡®ú‡®ø‡®π‡©ú‡®æ ‡®ï‡®¶‡©á ‡®®‡®æ ‡®ü‡©Å‡©±‡®ü‡©á", a:"‡®Ö‡®ü‡©Å‡©±‡®ü"},
  {q:"‡®ú‡®ø‡®π‡©ú‡®æ ‡®¨‡©ã‡®≤ ‡®®‡®æ ‡®∏‡®ï‡®¶‡®æ ‡®π‡©ã‡®µ‡©á", a:"‡®ó‡©Ç‡©∞‡®ó‡®æ"},
  {q:"‡®ú‡®ø‡®π‡©ú‡®æ ‡®∏‡®æ‡®∞‡©Ä‡®Ü‡®Ç ‡®∏‡®º‡®ï‡®§‡©Ä‡®Ü‡®Ç ‡®¶‡®æ ‡®Æ‡®æ‡®≤‡®ï ‡®π‡©ã‡®µ‡©á", a:"‡®∏‡®∞‡®¨-‡®∏‡®º‡®ï‡®§‡©Ä‡®Æ‡®æ‡®®"},

  {q:"‡®ú‡®ø‡®π‡©ú‡®æ ‡®ï‡©ã‡®à ‡®µ‡©Ä ‡®ï‡©∞‡®Æ ‡®®‡®æ ‡®ï‡®∞‡©á", a:"‡®µ‡®ø‡®π‡®≤‡©ú/‡®®‡®ø‡®ï‡©∞‡®Æ‡®æ"},
  {q:"‡®ú‡®ø‡®π‡©ú‡®æ ‡®ï‡®ø‡®∏‡©á ‡®ö‡©Ä‡®ú‡®º ‡®¶‡©Ä ‡®ñ‡©ã‡®ú ‡®ï‡®∞‡©á", a:"‡®ñ‡©ã‡®ú‡©Ä"},
  {q:"‡®ú‡®ø‡®π‡©ú‡®æ ‡®ï‡©Å‡®ù ‡®µ‡©±‡®°‡®ø‡®Ü‡®Ç-‡®µ‡®°‡©á‡®∞‡®ø‡®Ü‡®Ç ‡®ï‡©ã‡®≤‡©ã‡®Ç ‡®Æ‡®ø‡®≤‡®º‡©á", a:"‡®µ‡®ø‡®∞‡®∏‡®æ/ ‡®µ‡®ø‡®∞‡®æ‡®∏‡®§"},
  {q:"‡®ú‡®ø‡®π‡©ú‡®æ ‡®Æ‡®®‡©Å‡©±‡®ñ ‡®™‡©ú‡©ç‡®π‡®ø‡®Ü ‡®®‡®æ ‡®π‡©ã‡®µ‡©á", a:"‡®Ö‡®®‡®™‡©ú‡©ç‡®π"},
  {q:"‡®ú‡®ø‡®π‡©ú‡®æ ‡®Æ‡®®‡©Å‡©±‡®ñ ‡®ï‡®ø‡®∏‡©á ‡®®‡®æ‡®≤ ‡®™‡©±‡®ñ-‡®™‡®æ‡®§ ‡®®‡®æ ‡®ï‡®∞‡©á", a:"‡®®‡®ø‡®∞‡®™‡©±‡®ñ"},
  {q:"‡®ú‡®ø‡®π‡©ú‡©á ‡®Æ‡®®‡©Å‡©±‡®ñ ‡®á‡©±‡®ï‡©ã ‡®∏‡®Æ‡©á‡®Ç ‡®π‡©ã‡®è ‡®π‡©ã‡®£", a:"‡®∏‡®Æ‡®ï‡®æ‡®≤‡©Ä"},
  {q:"‡®ú‡®ø‡®π‡©ú‡®æ ‡®¶‡©á‡®∏ ‡®®‡®æ‡®≤ ‡®ó‡®º‡©±‡®¶‡®æ‡®∞‡©Ä ‡®ï‡®∞‡©á", a:"‡®¶‡©á‡®∏-‡®ß‡©ç‡®∞‡©ã‡®π‡©Ä/‡®ó‡®º‡©±‡®¶‡®æ‡®∞"},
  {q:"‡®ú‡®ø‡®π‡©ú‡®æ ‡®¨‡®π‡©Å‡®§‡©Ä‡®Ü‡®Ç ‡®ó‡©±‡®≤‡®æ‡®Ç ‡®ï‡®∞‡®¶‡®æ ‡®π‡©ã‡®µ‡©á", a:"‡®ó‡®æ‡®≤‡©ú‡©Ä"},
  {q:"‡®ú‡®ø‡®π‡©ú‡©á ‡®ó‡©Å‡®£ ‡®ú‡®æ‡®Ç ‡®î‡®ó‡®£ ‡®ú‡®®‡®Æ ‡®§‡©ã‡®Ç ‡®π‡©ã‡®£", a:"‡®ú‡®Æ‡®æ‡®Ç‡®¶‡®∞‡©Ç"},
  {q:"‡®ú‡®ø‡®π‡©ú‡®æ ‡®¨‡©±‡®ö‡®æ ‡®ò‡®∞ ‡®µ‡®ø‡©±‡®ö ‡®∏‡®≠ ‡®¨‡©±‡®ö‡®ø‡®Ü‡®Ç ‡®§‡©ã‡®Ç ‡®™‡®π‡®ø‡®≤‡®æ‡®Ç ‡®™‡©à‡®¶‡®æ ‡®π‡©ã‡®á‡®Ü ‡®π‡©ã‡®µ‡©á", a:"‡®ú‡©á‡®†‡®æ/ ‡®™‡®≤‡©á‡®†‡®æ"},

  {q:"‡®ú‡®ø‡®∏ ‡®®‡©á ‡®ß‡®∞‡®Æ ‡®ú‡®æ‡®Ç ‡®¶‡©á‡®∏ ‡®≤‡®à ‡®ú‡®æ‡®® ‡®ï‡©Å‡®∞‡®¨‡®æ‡®® ‡®ï‡©Ä‡®§‡©Ä ‡®π‡©ã‡®µ‡©á", a:"‡®∏‡®º‡®π‡©Ä‡®¶"},
  {q:"‡®ú‡®ø‡®∏ ‡®®‡©Ç‡©∞ ‡®∏‡®æ‡®∞‡©á ‡®™‡®ø‡®Ü‡®∞ ‡®ï‡®∞‡®®", a:"‡®π‡®∞‡®Æ‡®®-‡®™‡®ø‡®Ü‡®∞‡®æ"},
  {q:"‡®ú‡®ø‡®∏ ‡®∏‡®º‡®¨‡®¶ ‡®¶‡©á ‡®Ö‡®∞‡®• ‡®π‡©ã‡®£", a:"‡®∏‡®æ‡®∞‡®•‡®ï"},
  {q:"‡®ú‡®ø‡®∏ ‡®∏‡®º‡®¨‡®¶ ‡®¶‡©á ‡®ï‡©ã‡®à ‡®Ö‡®∞‡®• ‡®®‡®æ ‡®®‡®ø‡®ï‡®≤‡®¶‡©á ‡®π‡©ã‡®£", a:"‡®®‡®ø‡®∞‡®æ‡®∞‡®•‡®ï"},
  {q:"‡®ú‡®ø‡®∏ ‡®®‡©Ç‡©∞ ‡®ï‡®ø‡®π‡®æ ‡®ú‡®æ‡®Ç ‡®¨‡®ø‡®Ü‡®® ‡®®‡®æ ‡®ï‡©Ä‡®§‡®æ ‡®ú‡®æ ‡®∏‡®ï‡®¶‡®æ ‡®π‡©ã‡®µ‡©á", a:"‡®Ö‡®ï‡®π‡®ø"},
  {q:"‡®ú‡®ø‡®∏ ‡®â‡©±‡®§‡©á ‡®ï‡®π‡©Ä ‡®π‡©ã‡®à ‡®ï‡®ø‡®∏‡©á ‡®ó‡©±‡®≤ ‡®¶‡®æ ‡®â‡©±‡®ï‡®æ ‡®Ö‡®∏‡®∞ ‡®®‡®æ ‡®π‡©ã‡®µ‡©á", a:"‡®¢‡©Ä‡®† / ‡®¨‡©á‡®Ö‡®∏‡®∞"},
  {q:"‡®ú‡®¶‡©ã‡®Ç ‡®Æ‡©Ä‡®Ç‡®π ‡®®‡®æ ‡®™‡®µ‡©á ‡®ú‡®æ‡®Ç ‡®Æ‡©Ä‡®Ç‡®π ‡®¶‡©Ä ‡®ò‡®æ‡®ü ‡®π‡©ã‡®µ‡©á", a:"‡®î‡©ú/ ‡®∏‡©ã‡®ï‡®æ"},
  {q:"‡®ú‡©ã ‡®¶‡©Ç‡®∏‡®∞‡®ø‡®Ü‡®Ç ‡®¶‡®æ ‡®≠‡®≤‡®æ ‡®ï‡®∞‡©á", a:"‡®™‡®∞‡®â‡®™‡®ï‡®æ‡®∞‡©Ä"},
  {q:"‡®ú‡®ø‡©±‡®•‡©á ‡®∞‡©Å‡®™‡®è, ‡®™‡©à‡®∏‡©á ‡®ú‡®æ‡®Ç ‡®∏‡®ø‡©±‡®ï‡©á ‡®¨‡®£‡®æ‡®è ‡®ú‡®æ‡®£", a:"‡®ü‡®ï‡®∏‡®æ‡®≤"},
  {q:"‡®ú‡©ã ‡®∏‡®π‡®ø‡®£ ‡®®‡®æ ‡®ï‡©Ä‡®§‡®æ ‡®ú‡®æ ‡®∏‡®ï‡®¶‡®æ ‡®π‡©ã‡®µ‡©á", a:"‡®Ö‡®∏‡®π‡®ø"},

  {q:"‡®ú‡©ã ‡®™‡©à‡®∏‡©á ‡®ï‡©ã‡®≤ ‡®π‡©Å‡©∞‡®¶‡®ø‡®Ü‡®Ç ‡®π‡©ã‡®á‡®Ü‡®Ç ‡®µ‡©Ä ‡®ú‡®º‡®∞‡©Ç‡®∞‡©Ä ‡®ñ‡®º‡®∞‡®ö ‡®®‡®æ ‡®ï‡®∞‡©á", a:"‡®ï‡©∞‡®ú‡©Ç‡®∏"},
  {q:"‡®ú‡©ã ‡®¨‡©á‡®Æ‡®§‡®≤‡®¨ ‡®ñ‡®º‡®∞‡®ö ‡®ï‡®∞‡©á", a:"‡®ñ‡®º‡®∞‡®ö‡©Ä‡®≤‡®æ"},
  {q:"‡®ú‡©ã ‡®Ü‡®™ ‡®®‡®æ‡®≤ ‡®¨‡©Ä‡®§‡©Ä ‡®π‡©ã‡®µ‡©á", a:"‡®π‡©±‡®°‡®¨‡©Ä‡®§‡©Ä"},
  {q:"‡®ú‡©ã ‡®¶‡©Å‡®®‡©Ä‡®Ü‡®Ç ‡®®‡®æ‡®≤ ‡®¨‡©Ä‡®§‡©Ä ‡®π‡©ã‡®µ‡©á", a:"‡®ú‡©±‡®ó‡®¨‡©Ä‡®§‡©Ä"},
  {q:"‡®™‡®ø‡©∞‡®° ‡®¶‡©á ‡®ù‡®ó‡©ú‡®ø‡®Ü‡®Ç ‡®¶‡®æ ‡®´‡®º‡©à‡®∏‡®≤‡®æ ‡®ï‡®∞‡®® ‡®µ‡®æ‡®≤‡©Ä ‡®∏‡®≠‡®æ", a:"‡®™‡©∞‡®ö‡®æ‡®á‡®§"},
  {q:"‡®™‡©à‡®¶‡®≤ ‡®∏‡®´‡®º‡®∞ ‡®ï‡®∞‡®® ‡®µ‡®æ‡®≤‡®º‡®æ", a:"‡®™‡®æ‡®Ç‡®ß‡©Ä"},
  {q:"‡®™‡®ø‡®â-‡®¶‡®æ‡®¶‡©á ‡®¶‡©Ä ‡®ó‡©±‡®≤", a:"‡®™‡®ø‡®§‡®æ-‡®™‡©Å‡®∞‡®ñ‡©Ä"},
  {q:"‡®®‡®æ‡®ü‡®ï ‡®ú‡®æ‡®Ç ‡®´‡®º‡®ø‡®≤‡®Æ ‡®¶‡©á‡®ñ‡®£ ‡®µ‡®æ‡®≤‡®º‡®æ", a:"‡®¶‡®∞‡®∏‡®º‡®ï"},
  {q:"‡®≠‡®æ‡®∏‡®º‡®£ ‡®ú‡®æ‡®Ç ‡®ó‡©Ä‡®§-‡®∏‡©∞‡®ó‡©Ä‡®§ ‡®∏‡©Å‡®£‡®® ‡®µ‡®æ‡®≤‡®æ", a:"‡®∏‡©ç‡®∞‡©ã‡®§‡®æ"},
  {q:"‡®®‡®æ‡®ü‡®ï ‡®≤‡®ø‡®ñ‡®£ ‡®µ‡®æ‡®≤‡®æ", a:"‡®®‡®æ‡®ü‡®ï‡®ï‡®æ‡®∞"},

  {q:"‡®®‡®æ‡®µ‡®≤ ‡®≤‡®ø‡®ñ‡®£ ‡®µ‡®æ‡®≤‡®º‡®æ", a:"‡®®‡®æ‡®µ‡®≤‡®ï‡®æ‡®∞"},
  {q:"‡®Ø‡©ã‡®ß‡®ø‡®Ü‡®Ç ‡®¶‡©Ä ‡®Æ‡®π‡®ø‡®Æ‡®æ ‡®µ‡®ø‡©±‡®ö ‡®≤‡®ø‡®ñ‡©Ä ‡®ó‡®à ‡®¨‡®ø‡®∞‡®§‡®æ‡®Ç‡®§‡®ø‡®ï ‡®ï‡®µ‡®ø‡®§‡®æ", a:"‡®µ‡®æ‡®∞"}, /* <-- corrected */
  {q:"‡®ï‡®ø‡®∏‡©á ‡®®‡©Ç‡©∞ ‡®≤‡®æ ‡®ï‡©á ‡®ï‡®π‡©Ä ‡®ó‡©±‡®≤", a:"‡®Æ‡®ø‡®π‡®£‡®æ, ‡®ü‡®ï‡©ã‡®∞"},
  {q:"‡®≤‡©ú‡®æ‡®à ‡®µ‡®ø‡©±‡®ö ‡®®‡®ø‡®°‡®∞‡®§‡®æ ‡®®‡®æ‡®≤ ‡®≤‡©ú‡®® ‡®µ‡®æ‡®≤‡®º‡®æ", a:"‡®∏‡©Ç‡®∞‡®Æ‡®æ"},
  {q:"‡®≤‡©ã‡®ï‡®æ‡®Ç ‡®®‡©Ç‡©∞ ‡®µ‡®ø‡®Ü‡®ú ‡®â‡©±‡®§‡©á ‡®∞‡©Å‡®™‡®à‡®è ‡®¶‡©á‡®£ ‡®µ‡®æ‡®≤‡®º‡®æ ‡®µ‡®ø‡®Ö‡®ï‡®§‡©Ä", a:"‡®∏‡®º‡®æ‡®π‡©Ç‡®ï‡®æ‡®∞"},
  {q:"‡®≤‡©±‡®ï‡©ú‡®æ‡®Ç ‡®ï‡©±‡®ü‡®£ ‡®µ‡®æ‡®≤‡®º‡®æ", a:"‡®≤‡©±‡®ï‡©ú‡®π‡®æ‡®∞‡®æ"},
  {q:"‡®≤‡©ã‡®ï‡®æ‡®Ç ‡®¶‡©á ‡®™‡©ç‡®∞‡®§‡®ø‡®®‡®ø‡®ß‡®æ‡®Ç ‡®¶‡©Ä ‡®ï‡®®‡©Ç‡©∞‡®® ‡®¨‡®£‡®æ‡®â‡®£ ‡®µ‡®æ‡®≤‡©Ä ‡®∏‡®≠‡®æ", a:"‡®≤‡©ã‡®ï-‡®∏‡®≠‡®æ"},
  {q:"‡®∏‡®æ‡®∞‡®ø‡®Ü‡®Ç ‡®¶‡©Ä ‡®∏‡®æ‡®Ç‡®ù‡©Ä ‡®∞‡®æ‡®è", a:"‡®∏‡®∞‡®¨-‡®∏‡©∞‡®Æ‡®§‡©Ä"},
  {q:"‡®≠‡®æ‡®∞‡®§ ‡®¶‡®æ ‡®µ‡®∏‡®®‡©Ä‡®ï", a:"‡®≠‡®æ‡®∞‡®§‡©Ä"},
  {q:"‡®™‡©∞‡®ú‡®æ‡®¨ ‡®¶‡®æ ‡®µ‡®∏‡®®‡©Ä‡®ï", a:"‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä/‡®™‡©∞‡®ú‡®æ‡®¨‡®£"},
];

/* 7 levels √ó 10 */
const PER_LEVEL=10;
const LEVELS=[];
for(let i=0;i<7;i++) LEVELS.push(ALL.slice(i*PER_LEVEL, i*PER_LEVEL+PER_LEVEL));

/* options */
const ALL_ANS=ALL.map(x=>x.a.trim()).filter(Boolean);
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}
function candidatesFor(correct){
  const c=correct.trim();
  let pool=ALL_ANS.filter(a=>a!==c);
  const rules=[];
  if(c.includes("‡®ï‡®æ‡®∞")) rules.push(a=>a.includes("‡®ï‡®æ‡®∞"));
  if(c.includes("‡®ï‡®æ‡®∞‡©Ä")) rules.push(a=>a.includes("‡®ï‡®æ‡®∞‡©Ä"));
  if(c.includes("-")) rules.push(a=>a.includes("-"));
  if(c.includes("/")) rules.push(a=>a.includes("/"));
  if(c.includes("‡®∏‡®≠‡®æ")) rules.push(a=>a.includes("‡®∏‡®≠‡®æ"));
  if(c.startsWith("‡®Ö")) rules.push(a=>a.startsWith("‡®Ö"));
  for(const r of rules){
    const f=pool.filter(r);
    if(f.length>=3) pool=f;
  }
  return shuffle(pool);
}
function makeOptions(correct){
  const c=correct.trim();
  const pool=candidatesFor(c);
  const opts=[c];
  for(const x of pool){ if(opts.length>=4) break; if(!opts.includes(x)) opts.push(x); }
  while(opts.length<4){
    const r=ALL_ANS[Math.floor(Math.random()*ALL_ANS.length)];
    if(r && r!==c && !opts.includes(r)) opts.push(r);
  }
  return shuffle(opts);
}

/* ====== UI refs ====== */
const arena=document.getElementById("arena");
const qText=document.getElementById("qText");
const qNo=document.getElementById("qNo");
const msg=document.getElementById("msg");
const scorePill=document.getElementById("scorePill");
const progPill=document.getElementById("progPill");
const levelLine=document.getElementById("levelLine");
const levelPill=document.getElementById("levelPill");

const prevBtn=document.getElementById("prevBtn");
const nextBtn=document.getElementById("nextBtn");
const restartBtn=document.getElementById("restartBtn");

const overlay=document.getElementById("overlay");
const levelsBtn=document.getElementById("levelsBtn");
const closeOverlay=document.getElementById("closeOverlay");
const lvlGrid=document.getElementById("lvlGrid");

let score=0, levelIndex=0, qIndex=0;
let answered=new Set();
let locked=false;

/* ====== motion engine ====== */
let drops=[], raf=null, lastT=0;

function clamp(v,a,b){return Math.max(a,Math.min(b,v))}
function stopLoop(){ if(raf) cancelAnimationFrame(raf); raf=null; lastT=0; }
function clearArena(){ stopLoop(); arena.innerHTML=""; drops=[]; }

function paintDrop(el){
  const h=Math.floor(Math.random()*360);
  el.style.background =
    `radial-gradient(circle at 30% 25%, rgba(255,255,255,.96), rgba(255,255,255,.42) 35%, hsla(${h},95%,70%,.28) 70%, hsla(${(h+30)%360},95%,60%,.14) 100%),
     linear-gradient(135deg, hsla(${h},95%,72%,.92), hsla(${(h+35)%360},95%,62%,.48))`;
}

function startWhenArenaReady(fn){
  let tries=0;
  const tick=()=>{
    const r=arena.getBoundingClientRect();
    if(r.width>80 && r.height>120){ fn(); return; }
    tries++;
    if(tries<40) setTimeout(tick, 60);
  };
  tick();
}

function spawnDrops(options){
  clearArena();
  startWhenArenaReady(()=>{
    const W=arena.clientWidth, H=arena.clientHeight;
    const dia=90, r=dia/2, pad=10;

    const starts=[
      {x:W*0.22,y:H*0.34},
      {x:W*0.78,y:H*0.34},
      {x:W*0.28,y:H*0.76},
      {x:W*0.72,y:H*0.76},
    ];

    options.forEach((opt,i)=>{
      const el=document.createElement("div");
      el.className="drop";
      el.textContent=opt;
      paintDrop(el);
      arena.appendChild(el);

      const s=starts[i]||{x:W/2,y:H/2};
      drops.push({
        el,opt,r,
        x:clamp(s.x,r+pad,W-r-pad),
        y:clamp(s.y,r+pad,H-r-pad),
        vx:(Math.random()*2-1)*170,
        vy:(Math.random()*2-1)*170
      });

      el.addEventListener("click", ()=>onPick(opt, el), {passive:true});
      el.addEventListener("touchstart", ()=>onPick(opt, el), {passive:true});
    });

    raf=requestAnimationFrame(loop);
  });
}

function loop(t){
  if(!lastT) lastT=t;
  const dt=Math.min(0.030,(t-lastT)/1000);
  lastT=t;

  const W=arena.clientWidth, H=arena.clientHeight;
  const pad=10;

  for(const d of drops){
    d.vx += (Math.random()*2-1)*22*dt;
    d.vy += (Math.random()*2-1)*22*dt;
    d.vx *= (1 - 0.10*dt);
    d.vy *= (1 - 0.10*dt);

    d.x += d.vx*dt;
    d.y += d.vy*dt;

    if(d.x < d.r+pad){ d.x=d.r+pad; d.vx=Math.abs(d.vx); }
    if(d.x > W-d.r-pad){ d.x=W-d.r-pad; d.vx=-Math.abs(d.vx); }
    if(d.y < d.r+pad){ d.y=d.r+pad; d.vy=Math.abs(d.vy); }
    if(d.y > H-d.r-pad){ d.y=H-d.r-pad; d.vy=-Math.abs(d.vy); }
  }

  for(let i=0;i<drops.length;i++){
    for(let j=i+1;j<drops.length;j++){
      const a=drops[i], b=drops[j];
      const dx=b.x-a.x, dy=b.y-a.y;
      const dist=Math.hypot(dx,dy) || 0.0001;
      const min=a.r+b.r+12;
      if(dist < min){
        const overlap=min-dist;
        const nx=dx/dist, ny=dy/dist;
        a.x -= nx*overlap*0.5; a.y -= ny*overlap*0.5;
        b.x += nx*overlap*0.5; b.y += ny*overlap*0.5;
        a.x=clamp(a.x,a.r+pad,W-a.r-pad); a.y=clamp(a.y,a.r+pad,H-a.r-pad);
        b.x=clamp(b.x,b.r+pad,W-b.r-pad); b.y=clamp(b.y,b.r+pad,H-b.r-pad);
      }
    }
  }

  for(const d of drops){
    d.el.style.transform=`translate(${d.x-d.r}px,${d.y-d.r}px)`;
  }
  raf=requestAnimationFrame(loop);
}

/* ====== game flow ====== */
function renderLevelButtons(){
  lvlGrid.innerHTML="";
  LEVELS.forEach((_,i)=>{
    const b=document.createElement("button");
    b.className="lvlBtn"+(i===levelIndex?" active":"");
    b.textContent="Level "+(i+1);
    b.onclick=()=>{
      levelIndex=i; qIndex=0; answered=new Set(); locked=false;
      overlay.style.display="none";
      renderLevelButtons();
      render();
    };
    lvlGrid.appendChild(b);
  });
}

function render(){
  const level=LEVELS[levelIndex];
  const item=level[qIndex];

  levelLine.textContent=`Level ${levelIndex+1} ‚Ä¢ ${level.length} Questions`;
  levelPill.textContent=`Level ${levelIndex+1}`;
  qNo.textContent=`Q${qIndex+1}`;
  qText.textContent=item.q;

  progPill.textContent=`${answered.size}/${level.length}`;
  scorePill.textContent=`Score: ${score}`;
  msg.textContent="Ready ‚úÖ";
  locked=false;

  spawnDrops(makeOptions(item.a));
}

function lockDrops(){
  for(const d of drops){
    d.el.classList.add("locked");
  }
}

function onPick(option, el){
  if(locked) return;
  ensureAudio();

  const item=LEVELS[levelIndex][qIndex];
  if(option===item.a){
    locked=true;
    el.classList.add("ok");
    correctSound();
    msg.textContent="‡®∏‡®π‡©Ä ‚úÖ";
    if(!answered.has(qIndex)){ answered.add(qIndex); score+=10; }
    scorePill.textContent=`Score: ${score}`;
    progPill.textContent=`${answered.size}/${LEVELS[levelIndex].length}`;
    lockDrops();

    setTimeout(()=>{
      const level=LEVELS[levelIndex];
      if(qIndex < level.length-1){ qIndex++; render(); }
      else msg.textContent="Level Complete üéâ";
    }, 650);
  }else{
    el.classList.add("bad");
    wrongSound();
    msg.textContent="‡®ó‡®≤‡®§ ‚ùå";
    score -= 5;
    scorePill.textContent=`Score: ${score}`;
    setTimeout(()=>el.classList.remove("bad"), 260);
  }
}

/* buttons */
prevBtn.onclick=()=>{ if(qIndex>0){ qIndex--; render(); } };
nextBtn.onclick=()=>{ const level=LEVELS[levelIndex]; if(qIndex<level.length-1){ qIndex++; render(); } };
restartBtn.onclick=()=>{ answered=new Set(); qIndex=0; render(); };

levelsBtn.onclick=()=> overlay.style.display="flex";
closeOverlay.onclick=()=> overlay.style.display="none";
overlay.addEventListener("click",(e)=>{ if(e.target===overlay) overlay.style.display="none"; });

let resizeTimer=null;
addEventListener("resize", ()=>{
  clearTimeout(resizeTimer);
  resizeTimer=setTimeout(()=>{
    const item=LEVELS[levelIndex][qIndex];
    spawnDrops(makeOptions(item.a));
  }, 250);
});

/* init */
renderLevelButtons();
render();
</script>
</body>
</html>